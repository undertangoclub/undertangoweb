<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestor de Pagos para Artistas</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .artist-input,
      .show-input,
      .date-input,
      .payment-input,
      .reason-input {
        margin-bottom: 10px;
      }
      .record {
        display: flex;
        justify-content: space-between;
        background-color: #f9f9f9;
        padding: 10px;
        margin: 5px 0;
        border-radius: 5px;
      }
      .completed {
        text-decoration: line-through;
      }
      button {
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>Gestor de Pagos para Artistas</h1>

    <div class="artist-input">
      <label for="artistName">Nombre del Artista:</label>
      <input type="text" id="artistName" />
    </div>
    <div class="show-input">
      <label for="showLocation">Lugar del Show:</label>
      <input type="text" id="showLocation" />
    </div>
    <div class="date-input">
      <label for="showDate">Fecha del Show:</label>
      <input type="date" id="showDate" />
    </div>
    <div class="payment-input">
      <label for="amount">Cantidad a Pagar:</label>
      <input type="number" id="amount" />
    </div>
    <button onclick="addPaymentRecord()">Agregar Pago</button>

    <h2>Pagos Pendientes</h2>
    <div id="paymentRecords"></div>

    <h2>Pagos que Me Deben</h2>
    <div class="reason-input">
      <label for="reason">Motivo del Pago:</label>
      <input type="text" id="reason" />
    </div>
    <div class="payment-input">
      <label for="owedAmount">Cantidad que Me Deben:</label>
      <input type="number" id="owedAmount" />
    </div>
    <button onclick="addOwedRecord()">Agregar Deuda</button>

    <div id="owedRecords"></div>

    <script>
      // Load stored data on page load
      document.addEventListener("DOMContentLoaded", function () {
        const savedRecords = localStorage.getItem("paymentRecords");
        const savedOwedRecords = localStorage.getItem("owedRecords");
        if (savedRecords) {
          paymentRecords = JSON.parse(savedRecords);
          renderRecords();
        }
        if (savedOwedRecords) {
          owedRecords = JSON.parse(savedOwedRecords);
          renderOwedRecords();
        }
      });

      let paymentRecords = [];
      let owedRecords = [];

      function addPaymentRecord() {
        const artistName = document.getElementById("artistName").value.trim();
        const showLocation = document
          .getElementById("showLocation")
          .value.trim();
        const showDate = document.getElementById("showDate").value;
        const amount = document.getElementById("amount").value.trim();

        if (artistName && showLocation && showDate && amount) {
          const newRecord = {
            id: Date.now().toString(),
            artistName,
            showLocation,
            showDate,
            amount,
            paid: false,
          };

          paymentRecords.push(newRecord);
          saveRecords();
          renderRecords();
          clearInputs();
        }
      }

      function addOwedRecord() {
        const reason = document.getElementById("reason").value.trim();
        const owedAmount = document.getElementById("owedAmount").value.trim();

        if (reason && owedAmount) {
          const newRecord = {
            id: Date.now().toString(),
            reason,
            owedAmount,
            paid: false,
          };

          owedRecords.push(newRecord);
          saveOwedRecords();
          renderOwedRecords();
          clearOwedInputs();
        }
      }

      function renderRecords() {
        const recordsContainer = document.getElementById("paymentRecords");
        recordsContainer.innerHTML = "";

        paymentRecords.forEach((record) => {
          const recordElement = document.createElement("div");
          recordElement.classList.add("record");
          if (record.paid) {
            recordElement.classList.add("completed");
          }

          recordElement.innerHTML = `
                    <div>
                        <strong>Artista:</strong> ${record.artistName} - 
                        <strong>Show:</strong> ${record.showLocation} - 
                        <strong>Fecha:</strong> ${record.showDate} - 
                        <strong>Cantidad:</strong> $${record.amount}
                    </div>
                    <button onclick="editPaymentRecord('${
                      record.id
                    }')">Editar</button>
                    <button onclick="markAsPaid('${record.id}')">${
            record.paid ? "Archivado" : "Pagar"
          }</button>
                `;

          recordsContainer.appendChild(recordElement);
        });
      }

      function renderOwedRecords() {
        const recordsContainer = document.getElementById("owedRecords");
        recordsContainer.innerHTML = "";

        owedRecords.forEach((record) => {
          const recordElement = document.createElement("div");
          recordElement.classList.add("record");
          if (record.paid) {
            recordElement.classList.add("completed");
          }

          recordElement.innerHTML = `
                    <div>
                        <strong>Motivo:</strong> ${record.reason} - 
                        <strong>Cantidad:</strong> $${record.owedAmount}
                    </div>
                    <button onclick="editOwedRecord('${
                      record.id
                    }')">Editar</button>
                    <button onclick="markOwedAsPaid('${record.id}')">${
            record.paid ? "Archivado" : "Recibido"
          }</button>
                `;

          recordsContainer.appendChild(recordElement);
        });
      }

      function markAsPaid(id) {
        paymentRecords = paymentRecords.map((record) => {
          if (record.id === id) {
            return { ...record, paid: true };
          }
          return record;
        });
        saveRecords();
        renderRecords();
      }

      function markOwedAsPaid(id) {
        owedRecords = owedRecords.map((record) => {
          if (record.id === id) {
            return { ...record, paid: true };
          }
          return record;
        });
        saveOwedRecords();
        renderOwedRecords();
      }

      function editPaymentRecord(id) {
        const record = paymentRecords.find((record) => record.id === id);
        if (record) {
          document.getElementById("artistName").value = record.artistName;
          document.getElementById("showLocation").value = record.showLocation;
          document.getElementById("showDate").value = record.showDate;
          document.getElementById("amount").value = record.amount;
          deletePaymentRecord(id);
        }
      }

      function editOwedRecord(id) {
        const record = owedRecords.find((record) => record.id === id);
        if (record) {
          document.getElementById("reason").value = record.reason;
          document.getElementById("owedAmount").value = record.owedAmount;
          deleteOwedRecord(id);
        }
      }

      function deletePaymentRecord(id) {
        paymentRecords = paymentRecords.filter((record) => record.id !== id);
        saveRecords();
        renderRecords();
      }

      function deleteOwedRecord(id) {
        owedRecords = owedRecords.filter((record) => record.id !== id);
        saveOwedRecords();
        renderOwedRecords();
      }

      function saveRecords() {
        localStorage.setItem("paymentRecords", JSON.stringify(paymentRecords));
      }

      function saveOwedRecords() {
        localStorage.setItem("owedRecords", JSON.stringify(owedRecords));
      }

      function clearInputs() {
        document.getElementById("artistName").value = "";
        document.getElementById("showLocation").value = "";
        document.getElementById("showDate").value = "";
        document.getElementById("amount").value = "";
      }

      function clearOwedInputs() {
        document.getElementById("reason").value = "";
        document.getElementById("owedAmount").value = "";
      }
    </script>
  </body>
</html>
