<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Control Semanal de Shows - Doble Turno</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding: 0;
      }

      header {
        background: #333;
        color: #fff;
        padding: 1rem;
        text-align: center;
      }

      .container {
        max-width: 800px;
        margin: 1rem auto;
        padding: 1rem;
        background: #fff;
        border-radius: 5px;
      }

      h1,
      h2 {
        margin-top: 0;
      }

      .explanation {
        margin-bottom: 1rem;
      }

      .pairs-container {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      /* Cada pareja (Tiki y Meli / Yesi y Dennis) */
      .pair {
        padding: 1rem;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .pair + .pair {
        margin-top: 1rem;
      }

      .pair-header {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
      }

      .divider {
        margin: 1rem 0;
        height: 3px;
        background: #ddd;
        border: none;
      }

      /* Bloque para "Cruceros" y "Casa Malbec" */
      .sub-row {
        margin-bottom: 1rem;
      }
      .sub-row-title {
        font-weight: bold;
        margin-bottom: 0.3rem;
      }

      .days-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 0.5rem;
      }
      .day-item {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0.4rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        background: #fafafa;
        cursor: pointer;
        user-select: none;
        font-size: 0.9rem;
      }
      .day-item.active {
        background: #b2fab4; /* color de activado */
      }

      .summary {
        margin: 1rem 0;
        padding: 1rem;
        border: 1px dashed #ccc;
        background: #f9f9f9;
        /* Para evitar que se descuadre texto muy largo */
        word-wrap: break-word;
      }

      .summary p {
        margin: 0.5rem 0;
      }

      /* Botones */
      .buttons-area {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
      }
      button {
        padding: 0.5rem 1rem;
        cursor: pointer;
        border: none;
        border-radius: 4px;
        color: #fff;
        font-size: 0.9rem;
      }
      .tm-cru-btn {
        background: #007bff;
      }
      .tm-casa-btn {
        background: #0056b3;
      }
      .yd-cru-btn {
        background: #28a745;
      }
      .yd-casa-btn {
        background: #1e7e34;
      }

      .reset-btn {
        background: #dc3545;
        margin-top: 1rem;
      }
      .reset-btn:hover {
        background: #b52a34;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Control Semanal de Shows (Doble Turno)</h1>
    </header>

    <div class="container">
      <div class="explanation">
        <h2>1. Configura los días de cada pareja y turno</h2>
        <p>
          Selecciona los días (Dom, Lun, Mar, etc.) en los que cada equipo
          tendrá show, tanto en <strong>Cruceros</strong> como en
          <strong>Casa Malbec</strong>.
          <br />
          Al hacer clic en un día, se “activa” o “desactiva” para ese turno.
        </p>
      </div>

      <div class="pairs-container">
        <!-- TIKI Y MELI -->
        <div class="pair" id="tm-pair">
          <div class="pair-header">Tiki y Meli</div>
          <!-- Cruceros -->
          <div class="sub-row">
            <div class="sub-row-title">Cruceros</div>
            <div class="days-grid" id="tm-cruceros-row"></div>
          </div>
          <!-- Casa Malbec -->
          <div class="sub-row">
            <div class="sub-row-title">Casa Malbec</div>
            <div class="days-grid" id="tm-casa-row"></div>
          </div>
        </div>

        <hr class="divider" />

        <!-- YESI Y DENNIS -->
        <div class="pair" id="yd-pair">
          <div class="pair-header">Yesi y Dennis</div>
          <!-- Cruceros -->
          <div class="sub-row">
            <div class="sub-row-title">Cruceros</div>
            <div class="days-grid" id="yd-cruceros-row"></div>
          </div>
          <!-- Casa Malbec -->
          <div class="sub-row">
            <div class="sub-row-title">Casa Malbec</div>
            <div class="days-grid" id="yd-casa-row"></div>
          </div>
        </div>
      </div>

      <h2>2. Resumen semanal</h2>
      <div class="summary">
        <p>
          <strong>Tiki y Meli:</strong><br />
          &bull; <span id="tm-cru-pending">0</span> shows pendientes en
          <em>Cruceros</em><br />
          &bull; <span id="tm-casa-pending">0</span> shows pendientes en
          <em>Casa Malbec</em><br />
          Total: <span id="tm-total-pending">0</span>
        </p>
        <p>
          <strong>Yesi y Dennis:</strong><br />
          &bull; <span id="yd-cru-pending">0</span> shows pendientes en
          <em>Cruceros</em><br />
          &bull; <span id="yd-casa-pending">0</span> shows pendientes en
          <em>Casa Malbec</em><br />
          Total: <span id="yd-total-pending">0</span>
        </p>
      </div>

      <h2>3. Marcar shows completados</h2>
      <p>
        Cada vez que completes un show, haz clic en el botón correspondiente
        para descontarlo del total semanal (y del turno correspondiente).
      </p>
      <div class="buttons-area">
        <button class="tm-cru-btn" onclick="completeShow('tm','cruceros')">
          Completé un show de Tiki y Meli - Cruceros
        </button>
        <button class="tm-casa-btn" onclick="completeShow('tm','casa')">
          Completé un show de Tiki y Meli - Casa Malbec
        </button>
        <button class="yd-cru-btn" onclick="completeShow('yd','cruceros')">
          Completé un show de Yesi y Dennis - Cruceros
        </button>
        <button class="yd-casa-btn" onclick="completeShow('yd','casa')">
          Completé un show de Yesi y Dennis - Casa Malbec
        </button>
      </div>

      <h2>4. Reset semanal</h2>
      <p>
        Cuando termine la semana y quieras empezar una nueva cuenta, haz clic en
        el botón de reset:
      </p>
      <button class="reset-btn" onclick="resetWeek()">Resetear semana</button>
    </div>

    <script>
      /* 
        1) Arreglos de configuración para:
           - Tiki y Meli [Cruceros / Casa]
           - Yesi y Dennis [Cruceros / Casa]
         Cada uno tiene 7 valores booleanos que representan
         (Dom, Lun, Mar, Mié, Jue, Vie, Sáb).
      */
      let tikiMeliCruceros = [false, false, false, false, false, false, false];
      let tikiMeliCasa = [false, false, false, false, false, false, false];

      let yesiDennisCruceros = [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
      ];
      let yesiDennisCasa = [false, false, false, false, false, false, false];

      /* Días de la semana (empezamos en "Dom" hasta "Sáb") */
      const daysOfWeek = ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"];

      /*
        2) Generar la interfaz de 7 "botones" por cada sub-turno (Cruceros / Casa)
      */
      function createDayButtons(containerId, team, place) {
        const container = document.getElementById(containerId);
        daysOfWeek.forEach((day, index) => {
          const dayBtn = document.createElement("div");
          dayBtn.classList.add("day-item");
          dayBtn.textContent = day;
          dayBtn.addEventListener("click", () =>
            toggleDay(team, place, index, dayBtn)
          );
          container.appendChild(dayBtn);
        });
      }

      /*
        3) Al hacer clic, se activa/desactiva el día en la configuración correspondiente
      */
      function toggleDay(team, place, index, dayBtn) {
        if (team === "tm") {
          if (place === "cruceros") {
            tikiMeliCruceros[index] = !tikiMeliCruceros[index];
            dayBtn.classList.toggle("active");
          } else {
            tikiMeliCasa[index] = !tikiMeliCasa[index];
            dayBtn.classList.toggle("active");
          }
        } else {
          if (place === "cruceros") {
            yesiDennisCruceros[index] = !yesiDennisCruceros[index];
            dayBtn.classList.toggle("active");
          } else {
            yesiDennisCasa[index] = !yesiDennisCasa[index];
            dayBtn.classList.toggle("active");
          }
        }
        updatePendingShows();
      }

      /*
        4) Calculamos cuántos shows pendientes hay por turno
      */
      function updatePendingShows() {
        // Contar "true" en cada arreglo
        const tmCruCount = tikiMeliCruceros.filter(Boolean).length;
        const tmCasaCount = tikiMeliCasa.filter(Boolean).length;
        const ydCruCount = yesiDennisCruceros.filter(Boolean).length;
        const ydCasaCount = yesiDennisCasa.filter(Boolean).length;

        // Actualizar en el HTML
        document.getElementById("tm-cru-pending").textContent = tmCruCount;
        document.getElementById("tm-casa-pending").textContent = tmCasaCount;
        document.getElementById("tm-total-pending").textContent =
          tmCruCount + tmCasaCount;

        document.getElementById("yd-cru-pending").textContent = ydCruCount;
        document.getElementById("yd-casa-pending").textContent = ydCasaCount;
        document.getElementById("yd-total-pending").textContent =
          ydCruCount + ydCasaCount;
      }

      /*
        5) Completar show de un turno específico
      */
      function completeShow(team, place) {
        if (team === "tm") {
          if (place === "cruceros") {
            let count = tikiMeliCruceros.filter(Boolean).length;
            if (count > 0) {
              // "Consume" un día activo
              removeOneActive(tikiMeliCruceros);
            } else {
              alert("No hay shows pendientes en Cruceros para Tiki y Meli.");
            }
          } else {
            let count = tikiMeliCasa.filter(Boolean).length;
            if (count > 0) {
              removeOneActive(tikiMeliCasa);
            } else {
              alert("No hay shows pendientes en Casa Malbec para Tiki y Meli.");
            }
          }
        } else {
          if (place === "cruceros") {
            let count = yesiDennisCruceros.filter(Boolean).length;
            if (count > 0) {
              removeOneActive(yesiDennisCruceros);
            } else {
              alert("No hay shows pendientes en Cruceros para Yesi y Dennis.");
            }
          } else {
            let count = yesiDennisCasa.filter(Boolean).length;
            if (count > 0) {
              removeOneActive(yesiDennisCasa);
            } else {
              alert(
                "No hay shows pendientes en Casa Malbec para Yesi y Dennis."
              );
            }
          }
        }
        updatePendingShows();
      }

      /*
        5.1) Función auxiliar para "desactivar" 1 día activo en el array.
        Quita el primer 'true' que encuentre.
      */
      function removeOneActive(arr) {
        for (let i = 0; i < arr.length; i++) {
          if (arr[i]) {
            arr[i] = false;
            break;
          }
        }
      }

      /*
        6) Reset semana: todas las configuraciones a false, se quitan las clases "active"
      */
      function resetWeek() {
        if (!confirm("¿Seguro que quieres resetear la semana?")) return;

        // Reset arrays
        tikiMeliCruceros = [false, false, false, false, false, false, false];
        tikiMeliCasa = [false, false, false, false, false, false, false];
        yesiDennisCruceros = [false, false, false, false, false, false, false];
        yesiDennisCasa = [false, false, false, false, false, false, false];

        // Quitar la clase "active" de todos los day-item
        const allDayItems = document.querySelectorAll(".day-item");
        allDayItems.forEach((item) => item.classList.remove("active"));

        updatePendingShows();
      }

      /*
        7) Al cargar la página, se crean los "botones" de días
           para cada sub-turno (Cruceros / Casa) y se actualiza el conteo.
      */
      window.addEventListener("DOMContentLoaded", () => {
        // Tiki y Meli
        createDayButtons("tm-cruceros-row", "tm", "cruceros");
        createDayButtons("tm-casa-row", "tm", "casa");

        // Yesi y Dennis
        createDayButtons("yd-cruceros-row", "yd", "cruceros");
        createDayButtons("yd-casa-row", "yd", "casa");

        updatePendingShows();
      });
    </script>
  </body>
</html>
